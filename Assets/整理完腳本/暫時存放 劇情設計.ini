已經測試過劇情系統：
初始設置 -> 角色移動 -> 鏡頭控制(順移) -> 物件操作(生成物件、銷毀物件) -> 交互與事件(對話) -> (對話結束劇情繼續) -> 執行子劇情(角色移動) -> 鏡頭控制(轉移回原位) -> 結束
成功！
我們先來把劇情系統 SO 創建，請告訴我 Demo 第五幕：隊伍與戰鬥該怎麼製作。
當我們採集完，任務 Q_Novice_003 [可提交] -> 觸發事件 -> 劇情：魔獸出沒

劇情：魔獸出沒
```
ID:Story_Enemy_01
Action_01：顯示對話框
玩家：採集完了，可以回去了
Action_02：魔獸出沒
畫面轉移到洞穴門口，魔獸來到門口
Action_03：顯示對話框
畫面轉移到玩家
玩家：魔獸！
玩家：城鎮怎麼會出現魔獸！
畫面轉到魔獸處
魔獸：吼！
畫面再轉回到玩家
玩家：看來不打贏魔獸是出不去了！

End
```


當然！聽到您的劇情系統已經成功測試，真是太棒了！這是一個非常核心且複雜的系統，能順利運作代表您的整體架構非常穩固。

現在，我們就來將您設計的第五幕劇情「魔獸出沒」轉換為實際的 `StorySceneData` 資源。這是一個絕佳的實例，可以展示如何結合鏡頭、物件操作和對話來創造一個動態的過場動畫。

---

### **製作第五幕劇情 (Story_Enemy_01)**

整個流程分為三個主要步驟：
1.  **設置觸發器**：讓 `QuestStateListener` 在任務完成時啟動劇情。
2.  **準備場景和演員**：在藥園場景中設置 `StorySceneRunner` 並綁定所需物件。
3.  **創建數據資產**：編寫劇情的對話 XML 和 `StorySceneData`。

---

#### **第一步：設置觸發器 (The Trigger)**

1.  在您的**藥園場景**中，創建一個空的 GameObject，命名為 `QuestTrigger_EnemyAppear`。
2.  為這個物件添加 `QuestStateListener` 組件。
3.  在 Inspector 中設置其屬性：
    *   `Quest ID To Listen For`: `Q_Novice_003`
    *   `Listen Type`: `IsCompletable`
4.  稍後，我們會將 `StorySceneRunner` 的 `StartScene()` 方法拖到 `On State Matched` 事件欄位中。

---

#### **第二步：準備場景和演員 (The Runner & Cast)**

1.  同樣在**藥園場景**中，創建另一個空的 GameObject，命名為 `StoryRunner_EnemyAppear`。
2.  為這個物件添加 `StorySceneRunner` 組件。
3.  **關鍵一步**：根據您的劇本，我們需要以下「演員」。請在場景中準備好它們：
    *   **魔獸 Prefab**: 創建一個魔獸的 Prefab，並將其實例拖到藥園場景中，**初始狀態設為 `inactive` (不勾選激活框)**。
    *   **洞口位置**: 創建一個空的 GameObject，命名為 `CaveEntranceMarker`，將它移動到您希望魔獸出現並站立的洞口位置。
4.  現在，配置 `StorySceneRunner` 的 **Scene Actors (Cast List)**：
    *   **Element 0**:
        *   `Logical Name`: `主角`
        *   `Scene Object`: 將場景中的 `Player` 物件拖到這裡。
    *   **Element 1**:
        *   `Logical Name`: `洞口位置`
        *   `Scene Object`: 將剛剛創建的 `CaveEntranceMarker` 物件拖到這裡。
    *   **Element 2**:
        *   `Logical Name`: `魔獸`
        *   `Scene Object`: 將場景中那個**未激活**的魔獸實例拖到這裡。

5.  **連接觸發器**: 回到第一步創建的 `QuestTrigger_EnemyAppear` 物件，將 `StoryRunner_EnemyAppear` 物件拖到 `QuestStateListener` 的 `On State Matched` 事件欄位上，然後從下拉菜單中選擇 `StorySceneRunner` -> `StartScene()`。

至此，場景設置完成！

---

#### **第三步：創建數據資產 (The Data Assets)**

現在我們來創建劇情所需的數據文件。

##### **A. 創建對話 XML**

您的劇本包含多段對話。我們將它們放在一個專用的 XML 文件中。

**檔案位置**: `Resources/GameData/Dialogues/Story/`
**檔案名稱**: `Story_Enemy_01_Dialogue.xml`

```xml
<?xml version="1.0" encoding="utf-8"?>
<DialogueDatabase>
    <!-- 玩家採集完的內心獨白 -->
    <Dialogue id="Player_Thought_01">
        <Segment id="start">
            <Speaker>玩家</Speaker>
            <Text>採集完了，可以回去了。</Text>
            <Action type="EndDialogue" />
            <IsEnd>true</IsEnd>
        </Segment>
    </Dialogue>

    <!-- 玩家看到魔獸的反應 -->
    <Dialogue id="Player_React_01">
        <Segment id="start">
            <DialogueChain>
                <Line><Speaker>玩家</Speaker><Text>魔獸！</Text></Line>
                <Line><Speaker>玩家</Speaker><Text>城鎮怎麼會出現魔獸！</Text></Line>
            </DialogueChain>
            <Action type="EndDialogue" />
            <IsEnd>true</IsEnd>
        </Segment>
    </Dialogue>

    <!-- 魔獸的吼叫 -->
    <Dialogue id="Monster_Roar_01">
        <Segment id="start">
            <Speaker>魔獸</Speaker>
            <Text>吼！</Text>
            <Action type="EndDialogue" />
            <IsEnd>true</IsEnd>
        </Segment>
    </Dialogue>

    <!-- 玩家下定決心 -->
    <Dialogue id="Player_Resolve_01">
        <Segment id="start">
            <Speaker>玩家</Speaker>
            <Text>看來不打贏魔獸是出不去了！</Text>
            <Action type="EndDialogue" />
            <IsEnd>true</IsEnd>
        </Segment>
    </Dialogue>
</DialogueDatabase>
```

##### **B. 創建 StorySceneData**

這就是核心的劇本編排。在 Unity Project 窗口中，右鍵 `Create -> Story -> Story Scene Data`，將其命名為 `Story_Enemy_01`。

**在 Inspector 中按以下結構配置它：**

*   **Scene ID**: `Story_Enemy_01`
*   **Phases (階段列表)**:

    *   **Phase 1: 玩家獨白**
        *   `Phase Name`: `玩家獨白`
        *   **Actions (0)**:
            *   `Action Type`: `StartDialogue`
            *   `Dialogue File Path`: `Story/Story_Enemy_01_Dialogue`
            *   `Dialogue ID`: `Player_Thought_01`

    *   **Phase 2: 魔獸現身 (鏡頭移動與物件激活同時發生)**
        *   `Phase Name`: `魔獸現身`
        *   **Actions (0)**:
            *   `Action Type`: `MoveCameraToTarget`
            *   `Target Object Name`: `洞口位置`
            *   `Duration`: `1.5` (秒)
        *   **Actions (1)**:
            *   `Action Type`: `SetCharacterActive`
            *   `Target Object Name`: `魔獸`
            *   `Bool Value`: `true` (勾選)

    *   **Phase 3: 魔獸移動到定位點**
        *   `Phase Name`: `魔獸就位`
        *   **Actions (0)**:
            *   `Action Type`: `MoveCharacter`
            *   `Target Object Name`: `魔獸`
            *   `Target Position`: (手動將 `CaveEntranceMarker` 的 X, Y 坐標填入)
            *   `Duration`: `2.0` (秒)

    *   **Phase 4: 鏡頭轉向玩家**
        *   `Phase Name`: `鏡頭轉向玩家`
        *   **Actions (0)**:
            *   `Action Type`: `MoveCameraToTarget`
            *   `Target Object Name`: `主角`
            *   `Duration`: `1.0` (秒)

    *   **Phase 5: 玩家反應**
        *   `Phase Name`: `玩家反應`
        *   **Actions (0)**:
            *   `Action Type`: `StartDialogue`
            *   `Dialogue File Path`: `Story/Story_Enemy_01_Dialogue`
            *   `Dialogue ID`: `Player_React_01`

    *   **Phase 6: 鏡頭轉向魔獸**
        *   `Phase Name`: `鏡頭轉向魔獸`
        *   **Actions (0)**:
            *   `Action Type`: `MoveCameraToTarget`
            *   `Target Object Name`: `魔獸`
            *   `Duration`: `1.0` (秒)

    *   **Phase 7: 魔獸吼叫**
        *   `Phase Name`: `魔獸吼叫`
        *   **Actions (0)**:
            *   `Action Type`: `StartDialogue`
            *   `Dialogue File Path`: `Story/Story_Enemy_01_Dialogue`
            *   `Dialogue ID`: `Monster_Roar_01`

    *   **Phase 8: 鏡頭再次轉向玩家**
        *   `Phase Name`: `鏡頭再次轉向玩家`
        *   **Actions (0)**:
            *   `Action Type`: `MoveCameraToTarget`
            *   `Target Object Name`: `主角`
            *   `Duration`: `1.0` (秒)

    *   **Phase 9: 玩家下定決心**
        *   `Phase Name`: `玩家下定決心`
        *   **Actions (0)**:
            *   `Action Type`: `StartDialogue`
            *   `Dialogue File Path`: `Story/Story_Enemy_01_Dialogue`
            *   `Dialogue ID`: `Player_Resolve_01`

---

#### **最後一步：整合**

將您剛剛創建的 `Story_Enemy_01` 這個 `StorySceneData` 檔案，拖拽到藥園場景中 `StoryRunner_EnemyAppear` 物件的 `Scene Data` 欄位上。

**現在，整個流程就完成了！** 當玩家在遊戲中採集完藥草，使得任務 `Q_Novice_003` 變為可提交狀態時，`QuestStateListener` 就會被觸發，它會調用 `StorySceneRunner` 的 `StartScene` 方法，`StoryManager` 就會接管並按照您設計的九個階段，一步步地播放這段精彩的「魔獸出沒」過場動畫。