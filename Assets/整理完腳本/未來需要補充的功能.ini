**未來需要補充的功能**

核心戰鬥邏輯
1. 防禦 (Defend) 的實際效果：
目前 ActionPlan 中有 IsDefending 標記，但在 BattleUnit.TakeDamage() 中尚未加入「如果此單位處於防禦狀態，則本次傷害減半」的判斷邏輯。
2. 交換位置 (Swap Position) 的完整實現：
規則驗證：需要在 ActionPanelUI 中加入判斷，例如當前衛旁邊沒有遠程1時，禁用「交換」按鈕。
執行邏輯：在 BattleActions.Execute 中，需要實作兩個 BattleUnit 交換彼此的 BattleRole 屬性，並在畫面上交換他們的 Transform 位置（例如透過動畫或直接設定 position）。
3. 技能系統 (Skill System)：
技能資料：需要創建 SkillDataSO 來定義技能（效果、消耗、冷卻時間、目標類型等）。
技能選擇：點擊「技能」按鈕後，應彈出一個新的 UI 讓玩家選擇要使用哪個技能。
技能執行：在 BattleActions.Execute 中添加 ActionType.Skill 的處理邏輯，根據技能資料執行對應效果（如群體攻擊、治療、施加狀態等）。
資源消耗：可能需要為角色引入魔力（MP）或怒氣等資源系統。
4. 道具系統 (Item System)：
庫存整合：需要與 PartyManager 或一個新的 InventoryManager 連接，讀取玩家擁有的戰鬥可用道具。
道具選擇：點擊「道具」按鈕後，應彈出道具選擇 UI。
道具執行：在 BattleActions.Execute 中添加 ActionType.Item 的處理邏輯，執行道具效果（如恢復 HP/MP、解除異常狀態等）。
5. 指揮官技能 (Commander Skill) 的具體效果：
效果定義：需要明確「指揮官效果」是什麼，例如「全隊攻擊力+10%」或「每回合開始時恢復少量HP」。
效果應用：需要在戰鬥開始時，或在適當的時機（如屬性計算時）應用這個增益效果。
效果移除：當後勤上場時，需要實作移除此增益效果的邏輯。
6. 攻擊邏輯深化：
距離限制：尚未實作「遠程1攻擊距離>2格」、「遠程2攻擊距離>3格」的規則。這需要在顯示攻擊按鈕時進行判斷。
命中與暴擊：可以加入命中率、閃避率、暴擊率等屬性，讓戰鬥更富變化。
屬性克制：可以引入元素屬性（火、水、風、地等），實現屬性克制造成的增傷或減傷。
7. 狀態效果 (Status Effects)：
需要一個系統來管理增益（Buff）和減益（Debuff），例如中毒、麻痺、攻擊力提升等。這會影響 BattleUnit 的狀態和 TurnManager 的回合流程。

UI/UX互動
1. 戰術規劃板 (ActionSlotPanelUI) 的互動性：
目前的規劃方式是自動填入空格。應改為讓玩家點擊前衛/遠程的行動格，再點擊行動按鈕來進行指派，給予玩家更高的自由度。
可以考慮使用「拖曳」方式來分配遠程角色的行動格。
2. 視覺回饋與動畫：
單位移動：執行「交換位置」或「替補」時，角色模型應有移動動畫。
行動動畫：攻擊、施法、受擊、死亡等都應有對應的動畫和音效。
UI 動畫：血條變化可以做得更平滑（smooth lerp），UI 面板出現/消失時可以加入淡入淡出效果。
3. 戰鬥日誌 (BattleLog) 的增強：
可以使用富文本（Rich Text）為不同類型的日誌上色，例如傷害數字為紅色，治療為綠色，系統訊息為黃色。
4. 未實作的 UI 按鈕：
系統按鈕：需要實作其功能，例如打開遊戲設定、查看戰鬥教學、或選擇逃跑。
人物按鈕：點擊後應顯示更詳細的角色狀態面板，包括裝備、技能列表和狀態效果等。
5. 戰鬥中對話功能。
6. 戰鬥劇情導入。

系統整合與資料
1. 戰鬥結算資料：
HP同步：戰鬥結束後，需要將所有存活單位的 CurrentHP 寫回 PartyManager 中對應的 MemberInstance。
經驗值與升級：戰鬥勝利後，需要計算並給予角色經驗值（EXP）。當經驗值滿了，需要處理升級邏輯（提升等級、增加屬性）。
獎勵發放：需要呼叫 PartyManager 或 InventoryManager，將戰鬥勝利獲得的金錢和道具實際加入到玩家的持有物中。
2. 存檔與讀檔：
目前沒有在戰鬥中存檔的機制。若遊戲允許，需要考慮如何儲存戰鬥中的所有狀態。

AI 與內容擴充
1. 敵人 AI (EnemyBattleAI) 的智能化：
目前的 AI 只會攻擊預設目標。未來可以擴充：
目標選擇：會優先攻擊血量較低或威脅較大的玩家角色。
行動多樣化：敵人也應該會使用技能、防禦、或施加減益效果。
行為模式：為不同的敵人設計獨特的行為模式，例如有些敵人會在我方角色防禦時使用強力技能。
2. 內容擴充：
Boss 戰：設計擁有特殊階段和獨特機制的 Boss 戰。
多樣化的遭遇：設計不同組合的敵人隊伍，甚至是有增援或特殊場地效果的戰鬥。


